# ğŸ¬ EmbyPulse (æ˜ è¿¹)

<div align="center">
  <img src="static/img/logo-light.png" alt="EmbyPulse Logo" width="200" />
  <br/>
  <h3>Emby æœåŠ¡å™¨çš„é«˜çº§ä¼´ä¾£ï¼šæ•°æ®æ´å¯Ÿã€æŠ¥è¡¨ç”Ÿæˆä¸è‡ªåŠ¨åŒ–åŠ©æ‰‹</h3>
  <br/>
  <a href="https://t.me/Emby_Pluse">
    <img src="https://img.shields.io/badge/Telegram-åŠ å…¥äº¤æµç¾¤-2CA5E0?style=for-the-badge&logo=telegram" alt="Telegram Group">
  </a>
  <br/>
  <br/>
  <p>
    <a href="#-åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
    <a href="#-å¿«é€Ÿéƒ¨ç½²">å¿«é€Ÿéƒ¨ç½²</a> â€¢
    <a href="#-ç³»ç»Ÿé…ç½®">ç³»ç»Ÿé…ç½®</a> â€¢
    <a href="#-é¢„è§ˆæˆªå›¾">é¢„è§ˆæˆªå›¾</a>
  </p>
</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

**EmbyPulse (æ˜ è¿¹)** æ˜¯ä¸€ä¸ªä¸“ä¸º Emby Media Server æ‰“é€ çš„ç°ä»£åŒ–ç»¼åˆç®¡ç†é¢æ¿ã€‚å®ƒå¡«è¡¥äº†åŸç”Ÿåå°åœ¨æ•°æ®å¯è§†åŒ–å’Œè‡ªåŠ¨åŒ–è¿ç»´æ–¹é¢çš„ç©ºç™½ï¼Œä¸ºæœä¸»æä¾›äº†ä¸€ä¸ªç¾è§‚ã€ç›´è§‚ä¸”åŠŸèƒ½å¼ºå¤§çš„â€œç¬¬äºŒæ§åˆ¶å°â€ã€‚

æ— è®ºæ‚¨æ˜¯æƒ³é€šè¿‡ç²¾ç¾çš„å›¾è¡¨äº†è§£ç”¨æˆ·çš„è§‚å½±ä¹ æƒ¯ï¼Œè¿˜æ˜¯éœ€è¦è‡ªåŠ¨ç”Ÿæˆç±»ä¼¼â€œç½‘æ˜“äº‘éŸ³ä¹â€é£æ ¼çš„è§‚å½±å‘¨æŠ¥ï¼Œäº¦æˆ–æ˜¯é€šè¿‡ Telegram æœºå™¨äººå®ç°å…¨è‡ªåŠ¨åŒ–çš„å…¥åº“ä¸æ’­æ”¾é€šçŸ¥ï¼ŒEmbyPulse éƒ½èƒ½å®Œç¾æ»¡è¶³ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“… **è¿½å‰§æ—¥å† (TV Calendar) [NEW]**
* **æœ¬å‘¨çƒ­æ’­**ï¼šè‡ªåŠ¨åŒæ­¥ TMDB æ•°æ®ï¼Œç›´è§‚å±•ç¤ºæœ¬å‘¨ï¼ˆä¸Šå‘¨/ä¸‹å‘¨ï¼‰çš„å‰§é›†æ›´æ–°æ’æœŸã€‚
* **çŠ¶æ€çº¢ç»¿ç¯**ï¼šæ™ºèƒ½æ¯”å¯¹ Emby åº“å†…æ–‡ä»¶ã€‚
    * ğŸŸ¢ **å·²å…¥åº“**ï¼šç‚¹å‡»ç›´æ¥è·³è½¬ Emby æ’­æ”¾ã€‚
    * ğŸ”´ **ç¼ºå¤±**ï¼šå‰§é›†å·²å‡ºä½†åº“å†…æ²¡æœ‰ï¼Œç‚¹å‡»è‡ªåŠ¨å¤åˆ¶å‰§é›†ä¿¡æ¯ï¼ˆS01E05ï¼‰æ–¹ä¾¿è¡¥è´§ã€‚
* **çµæ´»é…ç½®**ï¼šå‰ç«¯å¯è‡ªå®šä¹‰ç¼“å­˜æ—¶é—´ï¼ˆ1å°æ—¶/1å¤©/7å¤©ï¼‰ï¼Œå…¼é¡¾æ€§èƒ½ä¸æ•°æ®æ—¶æ•ˆæ€§ã€‚

### ğŸŸï¸ **é‚€è¯·ä¸ç”¨æˆ·ç®¡ç† (User System) [NEW]**
* **é‚€è¯·æ³¨å†Œ**ï¼š
    * **é‚€è¯·ç ç”Ÿæˆ**ï¼šä¸€é”®ç”Ÿæˆä¸“å±æ³¨å†Œé“¾æ¥ï¼Œæ”¯æŒè®¾ç½®æœ‰æ•ˆæœŸï¼ˆå¦‚ 7å¤©ã€30å¤©ã€æ°¸ä¹…ï¼‰ã€‚
    * **è‡ªåŠ©æ³¨å†Œé¡µ**ï¼šç”¨æˆ·å‡­é“¾æ¥è‡ªåŠ©è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œæ— éœ€ç®¡ç†å‘˜æ‰‹åŠ¨å»ºå·ã€‚
* **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼š
    * **è‡ªåŠ¨è¿‡æœŸ**ï¼šæ”¯æŒè®¾ç½®è´¦å·æœ‰æ•ˆæœŸï¼Œåˆ°æœŸåç³»ç»Ÿè‡ªåŠ¨ç¦ç”¨è´¦å·ï¼Œçœå»äººå·¥ç»´æŠ¤æˆæœ¬ã€‚
    * **å…¨èƒ½ç¼–è¾‘**ï¼šæ”¯æŒåœ¨åå°ä¿®æ”¹ç”¨æˆ·æœ‰æ•ˆæœŸã€å°ç¦/è§£ç¦è´¦å·ï¼Œä»¥åŠ**å¼ºåˆ¶é‡ç½®ç”¨æˆ·å¯†ç **ã€‚

### ğŸ“Š **å…¨æ™¯ä»ªè¡¨ç›˜ (Dashboard)**
* **å®æ—¶ç›‘æ§**ï¼šç›´è§‚å±•ç¤ºå½“å‰å¹¶å‘æ’­æ”¾æ•°ã€è½¬ç ä»»åŠ¡çŠ¶æ€ã€å®æ—¶å¸¦å®½æ¶ˆè€—ã€‚
* **æ•°æ®å¤§å±**ï¼šä¸€è§ˆåª’ä½“åº“æ€»é‡ï¼ˆç”µå½±/å‰§é›†/é›†æ•°ï¼‰ã€å†å²æ’­æ”¾æ€»æ•°ã€æ´»è·ƒç”¨æˆ·æ•°åŠæ€»æ’­æ”¾æ—¶é•¿ã€‚
* **è¶‹åŠ¿åˆ†æ**ï¼šåŸºäº ECharts çš„äº¤äº’å¼å›¾è¡¨ï¼Œæ”¯æŒæŒ‰æ—¥ã€å‘¨ã€æœˆæŸ¥çœ‹æœåŠ¡å™¨çƒ­åº¦è¶‹åŠ¿ã€‚

### ğŸ•µï¸ **æ•°æ®æ´å¯Ÿ (Insights)**
* **ç”¨æˆ·ç”»åƒ**ï¼šåˆ†æç‰¹å®šç”¨æˆ·çš„è§‚å½±åå¥½ï¼Œç”Ÿæˆè¶£å‘³å‹‹ç« ï¼ˆå¦‚ï¼šä¿®ä»™å…šã€å‘¨æœ«ç‹‚æ¬¢ã€Embyè‚å¸ï¼‰ã€‚
* **è¡Œä¸ºåˆ†æ**ï¼šæä¾› 24 å°æ—¶è§‚å½±æ—¶é—´åˆ†å¸ƒçƒ­åŠ›å›¾åŠå®¢æˆ·ç«¯è®¾å¤‡åˆ†å¸ƒç»Ÿè®¡ã€‚
* **è´¨é‡ç›˜ç‚¹**ï¼šæ·±åº¦æ‰«æåª’ä½“åº“ï¼Œç»Ÿè®¡ 4K/HDR/æœæ¯”è§†ç•Œå æ¯”ï¼Œè‡ªåŠ¨åˆ—å‡ºä½ç”»è´¨ï¼ˆSD/480Pï¼‰èµ„æºä»¥ä¾¿æ´—ç‰ˆã€‚

### ğŸ¨ **æ˜ è¿¹å·¥åŠ (Report Generator)**
* **ç²¾ç¾æŠ¥è¡¨**ï¼šè‡ªåŠ¨ç”Ÿæˆç²¾ç¾çš„è§‚å½±æŠ¥å‘Šï¼ˆæ—¥æŠ¥ã€å‘¨æŠ¥ã€æœˆæŠ¥ã€å¹´æŠ¥ï¼‰ï¼Œæ”¯æŒç”Ÿæˆé•¿å›¾ã€‚
* **å¤šä¸»é¢˜åˆ‡æ¢**ï¼šå†…ç½®é»‘é‡‘ã€èµ›åšã€æå…‰ã€è½æ—¥ç­‰å¤šç§é…è‰²ä¸»é¢˜ï¼Œæ»¡è¶³ä¸åŒå®¡ç¾ã€‚
* **ä¸€é”®æ¨é€**ï¼šæ”¯æŒå°†ç”Ÿæˆçš„æŠ¥è¡¨å›¾ç‰‡ç›´æ¥æ¨é€åˆ° Telegram é¢‘é“æˆ–ç¾¤ç»„ï¼Œå¢å¼ºç¤¾åŒºæ´»è·ƒåº¦ã€‚

### ğŸ¤– **æœºå™¨äººåŠ©æ‰‹ (Bot)**
* **Telegram é›†æˆ**ï¼šæ— ç¼å¯¹æ¥ TG æœºå™¨äººï¼Œæ”¯æŒæŒ‡ä»¤äº¤äº’ã€‚
* **å®æ—¶é€šçŸ¥**ï¼š
    * **å…¥åº“é€šçŸ¥**ï¼šæ–°èµ„æºå…¥åº“æ—¶ï¼Œè‡ªåŠ¨å‘é€åŒ…å«æµ·æŠ¥ã€è¯„åˆ†å’Œç®€ä»‹çš„ç²¾ç¾é€šçŸ¥ã€‚
    * **æ’­æ”¾é€šçŸ¥**ï¼šå®æ—¶æ¨é€ç”¨æˆ·å¼€å§‹/åœæ­¢æ’­æ”¾çš„çŠ¶æ€æ¶ˆæ¯ã€‚
* **ä¾¿æ·æŒ‡ä»¤**ï¼šæ”¯æŒ `/search` (æœç´¢èµ„æº), `/stats` (ä»Šæ—¥ç»Ÿè®¡), `/check` (ç³»ç»Ÿå¥åº·) ç­‰å¸¸ç”¨æŒ‡ä»¤ã€‚

### ğŸ› ï¸ **ç®¡ç†ä¸è¿ç»´**
* **ä»»åŠ¡ä¸­å¿ƒ**ï¼šå¯è§†åŒ–ç®¡ç† Emby çš„è®¡åˆ’ä»»åŠ¡ï¼Œæ”¯æŒæ‰‹åŠ¨è§¦å‘ã€çŠ¶æ€ç›‘æ§åŠæ’ä»¶ä»»åŠ¡è‡ªåŠ¨åˆ†ç»„ã€‚
* **ç”¨æˆ·ç®¡ç†**ï¼šç›´è§‚çš„ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒæ‰¹é‡è®¾ç½®è´¦å·æœ‰æ•ˆæœŸã€ä¸€é”®ç¦ç”¨/å¯ç”¨æˆ–åˆ é™¤è¿è§„ç”¨æˆ·ã€‚
* **ç³»ç»Ÿè®¾ç½®**ï¼šå…¨å›¾å½¢åŒ–é…ç½®ï¼Œæ”¯æŒåœ¨çº¿ä¿®æ”¹ Emby è¿æ¥ã€TMDB APIï¼ˆç”¨äºåŠ¨æ€å£çº¸ï¼‰ã€Webhook å®‰å…¨ä»¤ç‰Œç­‰ã€‚

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

æ¨èä½¿ç”¨ Docker Compose è¿›è¡Œä¸€é”®éƒ¨ç½²ï¼Œä»…éœ€å‡ åˆ†é’Ÿå³å¯å®Œæˆã€‚

### 1. å‰ç½®æ¡ä»¶
* æœåŠ¡å™¨å·²å®‰è£… **Docker** å’Œ **Docker Compose**ã€‚
* å·²æ‹¥æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ **Emby Server**ã€‚
* **[é‡è¦]** Emby éœ€å®‰è£… **"Playback Reporting"** æ’ä»¶ï¼ˆå®˜æ–¹æ’ä»¶ä¸­å¿ƒå³å¯ä¸‹è½½ï¼‰ï¼Œç”¨äºè®°å½•å†å²æ’­æ”¾æ•°æ®ã€‚

### 2. åˆ›å»ºç›®å½•ä¸é…ç½®
åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºé¡¹ç›®ç›®å½•ï¼š
```bash
mkdir -p emby-pulse/config emby-pulse/static/img
cd emby-pulse

åˆ›å»º `docker-compose.yml` æ–‡ä»¶ï¼š
```yaml
version: '3.8'

services:
  emby-pulse:
    # 1. ä½¿ç”¨è¿œç¨‹é•œåƒ (ç¡®ä¿æ‚¨GitHub Actionså·²ç»æ„å»ºå®Œæˆå¹¶æ¨é€äº†æ–°é•œåƒ)
    image: zeyu8023/emby-stats:latest
    container_name: emby-pulse
    restart: unless-stopped
    network_mode: host
    
    volumes:
      # --- æ•°æ®ä¸é…ç½® ---
      - /volume1/docker/emby/data:/emby-data
      - ./config:/app/config  
    
    environment:
      - TZ=Asia/Shanghai
      - DB_PATH=/emby-data/playback_reporting.db
      # ä¸‹é¢è¿™ä¸¤ä¸ªå¦‚æœ config.json é‡Œå­˜äº†ï¼Œè¿™é‡Œå…¶å®å¯ä»¥åˆ æ‰ï¼Œä¿ç•™ä¹Ÿæ²¡äº‹ä½œä¸ºå…œåº•
      - EMBY_HOST=http://192.168.31.2:8096
      - EMBY_API_KEY=xxxxxxxxxxxxxxxxx

```

### 3. å¯åŠ¨æœåŠ¡
```bash
docker-compose up -d
```

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—® `http://æ‚¨çš„IP:10307` å³å¯è¿›å…¥ç™»å½•é¡µé¢ã€‚
> **é»˜è®¤è´¦å·å¯†ç **ï¼šç›´æ¥ä½¿ç”¨æ‚¨çš„ **Emby ç®¡ç†å‘˜è´¦å·** å’Œå¯†ç ç™»å½•ã€‚

---

## âš™ï¸ ç³»ç»Ÿé…ç½®

é¦–æ¬¡ç™»å½•åï¼Œè¯·ç‚¹å‡»ä¾§è¾¹æ çš„ **"ç³»ç»Ÿè®¾ç½®"** å®ŒæˆåŸºç¡€å¯¹æ¥ï¼š

1.  **API è®¾ç½®**ï¼š
    * åœ¨ Emby åå°ç”Ÿæˆä¸€ä¸ª API Keyï¼Œå¡«å…¥è®¾ç½®é¡µé¢çš„ "Emby API Key" æ ã€‚
2.  **Webhook é…ç½®** (å¯ç”¨å®æ—¶é€šçŸ¥)ï¼š
    * åœ¨ EmbyPulse è®¾ç½®é¡µè®¾ç½®ä¸€ä¸ª Token (ä¾‹å¦‚ `embypulse`)ã€‚
    * åœ¨ Emby åå° -> Webhooks -> æ·»åŠ  Webhookï¼š
        * URL: `http://IP:10307/api/v1/webhook?token=embypulse`
        * äº‹ä»¶å‹¾é€‰: `Playback Start`, `Playback Stop`, `New Media Added`ã€‚
3.  **æœºå™¨äººè®¾ç½®** (å¯é€‰)ï¼š
    * å¡«å…¥ Telegram Bot Token å’Œ Chat IDï¼Œå³å¯å¼€å¯æ¶ˆæ¯æ¨é€åŠŸèƒ½ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

<div align="center">
  <sub>Designed & Developed by EmbyPulse Team</sub>
</div>
